#include <iostream>
#include <vector>
#include <stdio.h>
#include <math.h>
using namespace std;

vector<int> start{3,8,1001,8,10,8,105,1,0,0,21,34,59,68,85,102,183,264,345,426,99999,3,9,101,3,9,9,102,3,9,9,4,9,99,3,9,1002,9,4,9,1001,9,2,9,1002,9,2,9,101,5,9,9,102,5,9,9,4,9,99,3,9,1001,9,4,9,4,9,99,3,9,101,3,9,9,1002,9,2,9,1001,9,5,9,4,9,99,3,9,1002,9,3,9,1001,9,5,9,102,3,9,9,4,9,99,3,9,1001,9,1,9,4,9,3,9,1001,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,2,9,4,9,3,9,101,2,9,9,4,9,3,9,102,2,9,9,4,9,3,9,102,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,101,1,9,9,4,9,99,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,101,1,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,101,2,9,9,4,9,99,3,9,1001,9,1,9,4,9,3,9,101,1,9,9,4,9,3,9,102,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,1001,9,1,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,99,3,9,1002,9,2,9,4,9,3,9,101,1,9,9,4,9,3,9,1001,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,101,2,9,9,4,9,99,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,1,9,9,4,9,3,9,102,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,102,2,9,9,4,9,3,9,101,2,9,9,4,9,99};
long long tmp, res = 0;
int amp = 0, no_set = 0;
vector<int> where(5);
long long high = -9999;
vector<vector<long long>> list(5);
vector<int> parameter(4);
vector<int> settings{0,0,0,0,0};
vector<int> best(5);
vector<vector<int>> allopt{{5,6,7,8,9}, {5,6,7,9,8}, {5,6,8,7,9}, {5,6,8,9,7}, {5,6,9,7,8}, {5,6,9,8,7}, {5,7,6,8,9}, {5,7,6,9,8}, {5,7,8,6,9}, {5,7,8,9,6}, {5,7,9,6,8}, {5,7,9,8,6}, {5,8,6,7,9}, {5,8,6,9,7}, {5,8,7,6,9}, {5,8,7,9,6}, {5,8,9,6,7}, {5,8,9,7,6}, {5,9,6,7,8}, {5,9,6,8,7}, {5,9,7,6,8}, {5,9,7,8,6}, {5,9,8,6,7}, {5,9,8,7,6}, {6,5,7,8,9}, {6,5,7,9,8}, {6,5,8,7,9}, {6,5,8,9,7}, {6,5,9,7,8}, {6,5,9,8,7}, {6,7,5,8,9}, {6,7,5,9,8}, {6,7,8,5,9}, {6,7,8,9,5}, {6,7,9,5,8}, {6,7,9,8,5}, {6,8,5,7,9}, {6,8,5,9,7}, {6,8,7,5,9}, {6,8,7,9,5}, {6,8,9,5,7}, {6,8,9,7,5}, {6,9,5,7,8}, {6,9,5,8,7}, {6,9,7,5,8}, {6,9,7,8,5}, {6,9,8,5,7}, {6,9,8,7,5}, {7,5,6,8,9}, {7,5,6,9,8}, {7,5,8,6,9}, {7,5,8,9,6}, {7,5,9,6,8}, {7,5,9,8,6}, {7,6,5,8,9}, {7,6,5,9,8}, {7,6,8,5,9}, {7,6,8,9,5}, {7,6,9,5,8}, {7,6,9,8,5}, {7,8,5,6,9}, {7,8,5,9,6}, {7,8,6,5,9}, {7,8,6,9,5}, {7,8,9,5,6}, {7,8,9,6,5}, {7,9,5,6,8}, {7,9,5,8,6}, {7,9,6,5,8}, {7,9,6,8,5}, {7,9,8,5,6}, {7,9,8,6,5}, {8,5,6,7,9}, {8,5,6,9,7}, {8,5,7,6,9}, {8,5,7,9,6}, {8,5,9,6,7}, {8,5,9,7,6}, {8,6,5,7,9}, {8,6,5,9,7}, {8,6,7,5,9}, {8,6,7,9,5}, {8,6,9,5,7}, {8,6,9,7,5}, {8,7,5,6,9}, {8,7,5,9,6}, {8,7,6,5,9}, {8,7,6,9,5}, {8,7,9,5,6}, {8,7,9,6,5}, {8,9,5,6,7}, {8,9,5,7,6}, {8,9,6,5,7}, {8,9,6,7,5}, {8,9,7,5,6}, {8,9,7,6,5}, {9,5,6,7,8}, {9,5,6,8,7}, {9,5,7,6,8}, {9,5,7,8,6}, {9,5,8,6,7}, {9,5,8,7,6}, {9,6,5,7,8}, {9,6,5,8,7}, {9,6,7,5,8}, {9,6,7,8,5}, {9,6,8,5,7}, {9,6,8,7,5}, {9,7,5,6,8}, {9,7,5,8,6}, {9,7,6,5,8}, {9,7,6,8,5}, {9,7,8,5,6}, {9,7,8,6,5}, {9,8,5,6,7}, {9,8,5,7,6}, {9,8,6,5,7}, {9,8,6,7,5}, {9,8,7,5,6}, {9,8,7,6,5}};

void restart()
{
  res = 0;
  no_set = 0;
  list.clear();
  list.resize(5);
  for(int i=0;i<5;i++)
  {
    where[i] = 0;
    for(int o=0;o<start.size();o++)
    {
      list[i].push_back(start[o]);
    }
  }
  return;
}

void new_set(int a)
{
  settings[0] = allopt[a][0];
  settings[1] = allopt[a][1];
  settings[2] = allopt[a][2];
  settings[3] = allopt[a][3];
  settings[4] = allopt[a][4];
  return;
}

void split(int nu)
{
  parameter[0] = nu % 100;
  parameter[1] = nu / 100 % 10;
  parameter[2] = nu / 1000 % 10;
  parameter[3] = nu / 10000 % 10;
}

int whatnum(int par, int id)
{
  if(par == 0)
  {
    return list[amp][list[amp][id]];
  }
  if(par == 1)
  {
    return list[amp][id];
  }
}

void com(int id)
{
  split(list[amp][id]);
  if(parameter[0] == 1)
  {
    //std::cout << "adding " <<list[list[id+1]]<<" med "<<list[list[id+2]]<< '\n';
    list[amp][list[amp][id+3]] = whatnum(parameter[1], id+1) + whatnum(parameter[2],id+2);
    where[amp] += 4;
  }
  else if(parameter[0] == 2)
  {
    //std::cout << "ganger " <<list[list[id+1]]<<" med "<<list[list[id+2]]<< '\n';
    list[amp][list[amp][id+3]] = whatnum(parameter[1], id+1) * whatnum(parameter[2],id+2);
    where[amp] += 4;
  }
  else if(parameter[0] == 3)
  {
    if(no_set == amp) //Flere indstillinger
    {
      list[amp][list[amp][id+1]] = settings[amp];
      no_set++;
    }
    else //Tager et indput
    {
      //std::cout << "amp " <<amp<< " tager "<<res<< '\n';
      list[amp][list[amp][id+1]] = res;
    }
    where[amp] += 2;
  }
  else if(parameter[0] == 4) //Amp pumping out answer
  {
    res = list[amp][list[amp][id+1]];
    //std::cout << "og skriver " <<res<< '\n';
    //std::cout << "skriver til: " <<amp+1<< " med "<<list[amp][list[id+1]]<< '\n';
    where[amp] += 2;
    if(!(where[amp] == 99 && amp == 4))
    {
      amp++; //Videre til den nÃ¦ste amp
      if(amp == 5)
      {
        amp = 0;
      }
    }
    else
    {

      std::cout << "DONE!!!" << '\n';
    }
  }
  else if(parameter[0] == 5)
  {
    if(whatnum(parameter[1], id+1))
    {
      where[amp] = whatnum(parameter[2], id+2);
    }
    else
    {
      where[amp] += 3;
    }
  }
  else if(parameter[0] == 6)
  {
    if(!whatnum(parameter[1], id+1))
    {
      where[amp] = whatnum(parameter[2], id+2);
    }
    else
    {
      where[amp] += 3;
    }
  }
  else if(parameter[0] == 7)
  {
    list[amp][list[amp][id+3]] = (whatnum(parameter[1], id+1) < whatnum(parameter[2], id+2));
    where[amp] += 4;
  }
  else if(parameter[0] == 8)
  {
    list[amp][list[amp][id+3]] = (whatnum(parameter[1], id+1) == whatnum(parameter[2], id+2));
    where[amp] += 4;
  }
  else
  {
    std::cout << "ERROR!!! " <<parameter[0]<<  '\n';
  }
  return;
}

int main()
{
  for(int i=0;i<120;i++)
  {
    new_set(i);
    restart();
    while(list[amp][where[amp]] != 99 || where[amp] >= list[amp].size())
    {
      com(where[amp]);
    }
    //std::cout << "got: " <<res<< '\n';
    if(res > high)
    {
      best[0] = settings[0];
      best[1] = settings[1];
      best[2] = settings[2];
      best[3] = settings[3];
      best[4] = settings[4];
    }
    high = max(high, res);
  }
  std::cout << "res= " <<high<<" from "<<best[0]<<best[1]<<best[2]<<best[3]<<best[4]<< '\n';

  return 0;
}

/*
1,12,2,3,1,1,2,3,1,3,4,3,1,5,0,3,2,6,1,19,1,19,5,23,2,10,23,27,2,27,13,31,1,10,31,35,1,35,9,39,2,39,13,43,1,43,5,47,1,47,6,51,2,6,51,55,1,5,55,59,2,9,59,63,2,6,63,67,1,13,67,71,1,9,71,75,2,13,75,79,1,79,10,83,2,83,9,87,1,5,87,91,2,91,6,95,2,13,95,99,1,99,5,103,1,103,2,107,1,107,10,0,99,2,0,14,0
*/
